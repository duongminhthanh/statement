!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@ctrl/ngx-chartjs",["exports","@angular/core"],e):e(((t=t||self).ctrl=t.ctrl||{},t.ctrl["ngx-chartjs"]={}),t.ng.core)}(this,function(t,e){"use strict";var n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function r(t,e,n,r){var a,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function i(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}var o=function(){function t(t){this.zone=t,this.chartClick=new e.EventEmitter,this.type="doughnut",this.height=150,this.width=300,this.legend={display:!0,position:"bottom"},this.options={},this.redraw=!1,this.datasetKeyProvider=function(t){return t.label}}return t.prototype.ngAfterViewInit=function(){this.renderChart()},t.prototype.ngOnChanges=function(t){if(!t.firstChange)return this.chartInstance&&this.redraw?(this.chartInstance.destroy(),void this.renderChart()):void this.updateChart()},t.prototype.updateChart=function(){var t=this,e=this.transformData();if(this.chartInstance){if(this.options){var r=require("chart.js");this.chartInstance.options=r.helpers.configMerge(this.chartInstance.options,this.options)}var a=this.chartInstance.config.data&&this.chartInstance.config.data.datasets||[],o=e.datasets||[],s={};a.forEach(function(e){s[t.datasetKeyProvider(e)]=e}),this.chartInstance.config.data.datasets=o.map(function(e){var n,r,a,o,c=s[t.datasetKeyProvider(e)];if(c&&c.type===e.type){try{for(var p=i(Object.keys(e)),h=p.next();!h.done;h=p.next()){var d=h.value;"data"!==d&&(c[d]=e[d])}}catch(y){n={error:y}}finally{try{h&&!h.done&&(r=p["return"])&&r.call(p)}finally{if(n)throw n.error}}try{for(var f=i(Object.keys(c)),u=f.next();!u.done;u=f.next()){var l=u.value;e.hasOwnProperty(l)||"_meta"===l||delete c[l]}}catch(g){a={error:g}}finally{try{u&&!u.done&&(o=f["return"])&&o.call(f)}finally{if(a)throw a.error}}return c.data.splice(e.data.length),e.data.forEach(function(t,n){c.data[n]=e.data[n]}),c}return e});e.datasets;var c=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&(n[r[a]]=t[r[a]])}return n}(e,["datasets"]);this.chartInstance.config.data=n({},this.chartInstance.config.data,c),this.chartInstance.update()}},t.prototype.renderChart=function(){var t=this,e=this.ref.nativeElement,r=this.transformData();if("undefined"!=typeof this.legend){var a=n({},this.legend,this.options.legend);this.options.legend=a}var i=require("chart.js");this.zone.runOutsideAngular(function(){t.chartInstance=new i(e,{type:t.type,data:r,options:t.options,plugins:t.plugins})})},t.prototype.transformData=function(){if(this.data){if("function"==typeof this.data){var t=this.ref;return this.data(t)}return this.data}},t.prototype.handleOnClick=function(t){this.chartClick.emit({elements:this.chartInstance.getElementsAtEvent(t),element:this.chartInstance.getElementAtEvent(t),dataset:this.chartInstance.getDatasetAtEvent(t),$event:t})},r([e.ViewChild("ref",{"static":!0}),a("design:type",e.ElementRef)],t.prototype,"ref",void 0),r([e.Output(),a("design:type",Object)],t.prototype,"chartClick",void 0),r([e.Input(),a("design:type",String)],t.prototype,"type",void 0),r([e.Input(),a("design:type",Object)],t.prototype,"data",void 0),r([e.Input(),a("design:type",Object)],t.prototype,"height",void 0),r([e.Input(),a("design:type",Object)],t.prototype,"width",void 0),r([e.Input(),a("design:type",Object)],t.prototype,"legend",void 0),r([e.Input(),a("design:type",Object)],t.prototype,"options",void 0),r([e.Input(),a("design:type",Array)],t.prototype,"plugins",void 0),r([e.Input(),a("design:type",Object)],t.prototype,"redraw",void 0),r([e.Input(),a("design:type",Function)],t.prototype,"datasetKeyProvider",void 0),t=r([e.Component({selector:"ngx-chartjs",template:'\n  \x3c!-- wrapping div required for height, width to work --\x3e\n  <div>\n    <canvas\n      #ref\n      [attr.height]="height"\n      [attr.width]="width"\n      (click)="handleOnClick($event)"\n    ></canvas>\n  </div>\n  ',changeDetection:e.ChangeDetectionStrategy.OnPush}),a("design:paramtypes",[e.NgZone])],t)}(),s=function(){function t(){}return t=r([e.NgModule({exports:[o],declarations:[o]})],t)}();t.ChartjsComponent=o,t.ChartjsModule=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ctrl-ngx-chartjs.umd.min.js.map